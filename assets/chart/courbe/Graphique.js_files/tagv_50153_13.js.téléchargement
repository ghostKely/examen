function etvcb(n,t){var i=window["_etv"+t];i.launchConfirmation(n)}var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),esvtrackview;(function(n){function vi(){return new et}var v=0,nt=1,y=2,tt=3,h=0,ot=1,st=2,ht=3,it;n.doc=document;n.win=window;n.loc=location;n.scr=screen;it="https:";n.AID="50153";n.TID="13";n.V="1";n.TV="1";n.VURL=it+"//tk.airfrance.fr/v/";var ct="0",lt="0",at="1",vt="1",yt="50",pt="1",wt="0",t=n.win.top!=n.win.self,u=function(){try{var n=$sf&&$sf.ext;if(n)return n}catch(t){}return null}(),p=u!=null,bt="IntersectionObserver"in n.win&&"IntersectionObserverEntry"in n.win&&"intersectionRatio"in IntersectionObserverEntry.prototype,kt=Object.prototype.hasOwnProperty.call(n.win,"mozInnerScreenY"),rt=function(){},dt=function(n){return n};n.date=function(){return new Date};n.rand=Math.random;n.log=rt;n.err=function(t){var r={message:t.message,stack:t.stack},u=n.VURL+"err.gif?esvid=A"+n.AID+"&esvtv="+n.TV+"&esvtid="+n.TID+"&"+b(r,function(n){return n}),i=new Image;i.width=1;i.border="0";i.src=u};var ut=encodeURIComponent||window.escape,r=decodeURIComponent||window.unescape,f=RegExp,i=Math.floor,o=Math.max,e=function(){return n.date().getTime()},gt=function(){return i(e()/1e3)},s=function(n,t,i){n.addEventListener?n.addEventListener(t,i,!1):n.attachEvent&&n.attachEvent("on"+t,i)},w=function(n,t,i){n.removeEventListener?n.removeEventListener(t,i,!1):n.detachEvent&&n.detachEvent("on"+t,i)},c=function(i,r,u,f){f===void 0&&(f=!1);f?t?(s(n.win.self,r,u),s(n.win.top,r,u)):s(n.win,r,u):t?s(n.doc.body.parentElement,r,u):s(i,r,u)},l=function(i,r,u,f){f===void 0&&(f=!1);f?w(n.win,r,u):t?w(n.doc.body.parentElement,r,u):w(i,r,u)},ni=function(n){for(var t=2166136261,i=0;i<n.length;++i)t+=(t<<1)+(t<<4)+(t<<7)+(t<<8)+(t<<24),t^=n.charCodeAt(i);return t>>>0},nr=function(n){if(n){var t=new f("^(?:(?:https?|ftp):)/*(?:[^@/]+@)?([^:/#]+)").exec(n);return t?t[1]:n}return""},ti=function(t,i){return r((new f("[?|&]"+t+"=([^&;]+?)(&|#|;|$)","gi").exec(i?i:n.loc.search)||[,""])[1].replace(/\+/g,"%20"))||null},ii=function(t,i,u){for(var s={},e,h=new f("[?&;]([^&;]+?)=([^&;]+)","gi"),c=new f(t),o;e=h.exec(i?i:n.loc.search);)o=e[1].match(c),(!u&&o||u&&!o)&&(s[e[1]]=r(e[2]));return s},ri=function(){var i="";if(t)try{i=n.win.document.referrer}catch(r){try{i=n.doc.referrer}catch(u){}}return i},ft=function(){return n.loc.href},b=function(n,t,i){var r,u;if(i=i||"",t=t||dt,r=[],n)for(u in n)r.push(ut(u+i)+"="+ut(t(n[u])));return r.join("&")},tr=function(n){var i,u,f,t;if(n===void 0&&(n=""),n==null)return{};for(i={},f=n.split("&"),t=0;t<f.length;t++)u=f[t].split("="),i[r(u[0])]=r(u[1]);return i},ui=function(n,t){t===void 0&&(t=0);var i=r(n);return t==5?n:i.length==n.length?n:r(i,t+1)},fi=function(){var e=n.AID+"_"+n.TID,o=n.doc.getElementById("esvtagv_"+e),i,r,t,u,f;if(o)return o;for(i="/tagv_"+e,r=n.doc.getElementsByTagName("script"),t=r.length-1;t>=0;t--)if(u=r[t],f=u.src,f.indexOf(i+".js")>-1||f.indexOf(i+"_debug.js")>-1)return u;return null},ei=function(){var u=n.win.clickTAG0||n.win.clickTag0||n.win.clicktag0||n.win.clickTAG1||n.win.clickTag1||n.win.clicktag1,t,i;return u?undefined:(t=n.win.clickTAG||n.win.clickTag||n.win.clicktag,t||(i=n.loc.search.match(/[\?\&]clickTag=([^\&]*)\&?/i),t=i?r(i[1]):undefined),t)},oi=function(){var t=n.doc.createElement("div"),i=t.style,e,o,r,u;i.visibility="hidden";i.width="100px";i.height="100px";i.msOverflowStyle="scrollbar";n.doc.body.appendChild(t);e=t.offsetWidth;o=t.offsetHeight;i.overflow="scroll";r=n.doc.createElement("div");u=t.style;u.width="100%";u.height="100%";t.appendChild(r);var s=r.offsetWidth,h=r.offsetHeight,f={};return f.width=e-s,f.height=o-h,t.parentNode.removeChild(t),f},k=function(i){var f=hi(),r=n.doc.hasFocus();if(i.fA=!1,t)if(u&&u.winHasFocus)r=r||u.winHasFocus(),i.fA=!0;else try{r=r||n.win.top.document.hasFocus();i.fA=!0}catch(e){}if(f)i.fA=!0;else return!1;return document[f]},si=function(){for(var i,r=0,t=0,f=n.doc.getElementsByTagName("*"),u=0;u<f.length;u++)i=f[u],i.currentStyle?t=parseInt(i.currentStyle.zIndex):n.win.getComputedStyle&&n.win.getComputedStyle(i)&&(t=parseInt(n.win.getComputedStyle(i).getPropertyValue("z-index"))),!isNaN(t)&&t>r&&(r=t);return r},hi=function(){var t=["webkit","moz","ms","o"],n;if("hidden"in document)return"hidden";for(n=0;n<t.length;n++)if(t[n]+"Hidden"in document)return t[n]+"Hidden";return null},d=function(i){var f=i.aE,u,r,e,o;if(t&&!p&&(i.scS=oi()),u=!1,p&&ai(i)&&(i.vM=nt,u=!0),!u){try{i.z=si()}catch(s){}if(t?li(i):ci(i),r=null,f!=null)try{r=f.getBoundingClientRect()}catch(s){}t?bt?(i.aW=n.win.innerWidth,i.aH=n.win.innerHeight,i.aT=0,i.aB=0,i.aL=0,i.aR=0,i.vM=tt):kt&&(e=78,o=8,i.aW=n.win.innerWidth,i.aH=n.win.innerHeight,i.aT=n.win.mozInnerScreenY-n.win.screenY-e,i.aB=i.aT+i.aH,i.aL=n.win.mozInnerScreenX-n.win.screenX-o,i.aR=i.aL+i.aW,i.vM=y):r?(i.aW=r.width?r.width:r.right-r.left,i.aH=r.height?r.height:r.bottom-r.top,i.aT=r.top,i.aB=r.bottom,i.aL=r.left,i.aR=r.right,i.vM=y):(i.aW=n.win.innerWidth,i.aH=n.win.innerHeight,i.aT=0,i.aB=0,i.aL=0,i.aR=0,i.vM=v)}},ci=function(t){var i=n.doc.documentElement,r=n.doc.body;typeof n.win.innerWidth=="number"?(t.wW=n.win.innerWidth,t.wH=n.win.innerHeight):i&&(i.clientWidth||i.clientHeight)?(t.wW=i.clientWidth,t.wH=i.clientHeight):r&&(r.clientWidth||r.clientHeight)&&(t.wW=r.clientWidth,t.wH=r.clientHeight)},li=function(t){t.wW=n.win.outerWidth-t.scS.width;t.wH=n.win.outerHeight-t.scS.height},ai=function(t){try{var r=u.geom().win,i=u.geom().self;t.wH=r.h;t.wW=r.w;t.aH=i.h;t.aW=i.w;t.aT=i.t;t.aB=i.b;t.aL=i.l;t.aR=i.r;t.z=i.z}catch(f){return n.err(f),!1}return!0};n.getTracker=vi;var yi=function(){function n(){this.vR=0;this.vM=v}return n}(),a=function(){function n(n,t,i){this.vistime=0;this.cts=0;this.trk=n;this.ctyp=i;this.adprops=t}return n.prototype.start=function(){},n.prototype.stop=function(){},n.prototype.confirmed=function(n){this.cts=n;this.trk.fire(this)},n}(),pi=function(n){function t(t,i){return n.call(this,t,i,h)||this}return __extends(t,n),t.prototype.start=function(){n.prototype.start.call(this);n.prototype.confirmed.call(this,e())},t}(a),wi=function(n){function t(t,i){var r=n.call(this,t,i,ht)||this,u=r;return r.click=function(){var n=e();u.vistime+=n-u.lastTimestamp;u.confirmed(n)},r}return __extends(t,n),t.prototype.start=function(){n.prototype.start.call(this);this.lastTimestamp=e();c(this.trk.elem,"click",this.click)},t.prototype.confirmed=function(t){this.stop();n.prototype.confirmed.call(this,t)},t.prototype.stop=function(){n.prototype.stop.call(this);l(this.trk.elem,"click",this.click)},t}(a),g=function(n){function t(t,i){var r=n.call(this,t,i,ot)||this;return r.minVis=0,r.minTime=1,r.needFocus=!1,r}return __extends(t,n),t.prototype.start=function(){function i(){var r=e(),n=t.adprops,u;d(n);var f=t.refreshVis(),i=!1;return f&&(i=n.vR>=t.minVis,t.needFocus&&(u=!k(n),i=i&&(n.fA&&u||!n.fA)),i&&t.lastState&&(t.vistime+=r-t.lastTs,t.comp=t.vistime>t.minTime*1e3),t.comp&&t.confirmed(r)),t.lastState=i,t.lastTs=r,r}var t=this;n.prototype.start.call(this);i();this.timer=setInterval(i,200)},t.prototype.stop=function(){n.prototype.stop.call(this);clearTimeout(this.timer)},t.prototype.confirmed=function(t){this.stop();n.prototype.confirmed.call(this,t)},t.prototype.refreshVis=function(){return!1},t}(a),bi=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.refreshVis=function(){return this.adprops.vR=u.inViewPercentage(),!0},t}(g),ki=function(n){function t(){return n!==null&&n.apply(this,arguments)||this}return __extends(t,n),t.prototype.refreshVis=function(){var n=this.adprops,t=o(0,n.aH-o(0,n.aB-n.wH)-o(0,0-n.aT)),i=o(0,n.aW-o(0,n.aR-n.wW)-o(0,0-n.aL)),r=n.aW*n.aH,u=i*t;return n.vR=u/r*100,!0},t}(g),di=function(t){function i(){return t!==null&&t.apply(this,arguments)||this}return __extends(i,t),i.prototype.start=function(){var i=this,r={root:null,rootMargin:"0px",threshold:[this.minVis/100]};this.intObs=new IntersectionObserver(function(n){(n!=null||n.length>0)&&(i.adprops.vR=n[0].intersectionRatio*100)},r);this.intObsTgt=n.doc.documentElement;this.intObs.observe(this.intObsTgt);t.prototype.start.call(this)},i.prototype.stop=function(){this.intObs!=null&&(this.intObs.unobserve(this.intObsTgt),this.intObs.disconnect(),this.intObs=null);t.prototype.stop.call(this)},i.prototype.refreshVis=function(){return this.intObs!=null},i}(g),gi=function(n){function i(t,i){var u=n.call(this,t,i,st)||this,r;return u.minTime=1,u.needFocus=!1,r=u,u.enter=function(){function n(){var n=e(),t=!0,i;return r.needFocus&&(i=!k(r.adprops),t=t&&(r.adprops.fA&&i||!r.adprops.fA)),t&&r.lastState&&(r.vistime+=n-r.lastTs,r.complete=r.vistime>r.minTime*1e3),r.complete&&r.confirmed(n),r.lastTs=n,r.lastState=t,n}n();r.timer=setInterval(n,200)},u.leave=function(){clearTimeout(r.timer)},u}return __extends(i,n),i.prototype.start=function(){n.prototype.start.call(this);c(this.trk.elem,"mouseenter",this.enter);t?c(this.trk.elem,"mouseleave",this.leave):c(this.trk.elem,"mouseout",this.leave)},i.prototype.stop=function(){n.prototype.stop.call(this);l(this.trk.elem,"mouseenter",this.enter);t?l(this.trk.elem,"mouseleave",this.leave):l(this.trk.elem,"mouseout",this.leave)},i}(a),et=function(){function u(){function c(){var r=null;try{r=t?n.win.frameElement:i.elem}catch(u){}return r}function l(n,t){function e(n){var u,s,e;if(n){var t=n.charAt(0),o=n.indexOf("/"),h=n.indexOf("=");for(t=="?"||t=="&"||t==";"||o>-1&&o<h||(n="?"+n),s=new f("[?&;]([^&;]+?)=([^&;]+)","gi");u=s.exec(n);)e=u[1].toLowerCase(),i.prms.indexOf(e)<0&&(i.prms[e]=r(u[2]))}}function o(){for(var r,f,t=i.elem.getElementsByTagName("a"),n=0,e=t.length;n<e;n++)r=t[n].getAttribute("href"),u("^(esv)|(utm_)|(wiz_)",r)||(f=t[n].getAttribute("onclick"),u("^(esv)|(utm_)|(wiz_)",f))}function u(n,t){var s;if(t==undefined)return!1;for(var r,u=new f("[?&;]([^&;]+?)=([^&;]+)","gi"),e=new f(n),o=ui(t);r=u.exec(o);)if(s=r[1].toLowerCase(),r[1].match(e))return i.prms.esvcu=t,!0;return!1}if(e(n),t){i.prms.esvcu=t;return}var s=ei();if(t){i.prms.esvcu=t;return}o()}var i,e,o,s,h,u;this.confOk=!1;this.prms=[];i=this;i.aid=parseInt(n.AID)||0;i.vurl=n.VURL;i.epok=gt();i.vid="0000000"+ni(n.rand().toString()+i.epok.toString()).toString(16);i.vid=i.vid.slice(-8)+i.epok.toString(16);try{if(e=fi(),e&&(e.id="",i.elem=e.parentElement,o="",s="",e.hasAttribute("data-clickurl")||e.hasAttribute("data-parameters")?(o=e.getAttribute("data-clickurl"),s=e.getAttribute("data-parameters")):(h=e.src,o=ti("clickurl",h),s=b(ii("clickurl",h,!0),null)),l(s,o),u=new yi,u.aE=c(),d(u),i.confAct=new pi(this,u),ct=="1"&&(i.confClick=new wi(this,u)),lt=="1"&&(i.confHover=new gi(this,u),i.confHover.minTime=parseInt(at)||30),vt=="1")){switch(u.vM){case nt:i.confVis=new bi(this,u);break;case y:i.confVis=new ki(this,u);break;case tt:i.confVis=new di(this,u)}i.confVis&&(i.confVis.minVis=parseInt(yt)||50,i.confVis.minTime=parseInt(pt)||1,i.confVis.needFocus="1"==wt)}}catch(a){n.err(a)}}return u.prototype.start=function(){var n=this;return this.confAct&&(typeof gdpr_check=="object"?gdpr_check.start(this,function(){return n.confAct.start()}):this.confAct.start()),this},u.prototype.launchConfirmation=function(n){this.ats=n;this.confHover&&this.confHover.start();this.confVis&&this.confVis.start();this.confClick&&this.confClick.start()},u.prototype.fire=function(r){var o=this,f,nt,u,a,l,s,y;if(!o.confOk){r.ctyp!=h&&(o.confClick&&o.confClick.stop(),o.confVis&&o.confVis.stop(),o.confHover&&o.confHover.stop(),o.confOk=!0,o.prms.esvsts=o.ats);f=r.adprops;d(f);nt=n.scr.width+"x"+n.scr.height;u=o.prms;u.esvvid=o.vid;u.esvc=r.ctyp;u.esvisc=f.vM!=v?"1":"0";u.esvf=t?"1":"0";u.esvsf=p?"1":"0";u.esvrsl=n.scr.width+"x"+n.scr.height;u.esvwinrsl=f.wW+"x"+f.wH;u.esvaddim=i(f.aW)+"x"+i(f.aH);u.esvadlt=i(f.aL)+"x"+i(f.aT);u.esvadrb=i(f.aR)+"x"+i(f.aB);f.z&&(u.esvadz=f.z);u.esvview=i(f.vR);u.esvfocus=k(f)?"0":"1";a=i(r.vistime);u.esvviewts=a;u.esvpub=t?ri().substr(0,2e3):ft().substr(0,2e3);u.esvads=t?ft().substr(0,2e3):"";var w="&"+b(u,null),g="?esvid=A"+o.aid.toString()+(r.ctyp==h?"&esvcb=etvcb":"")+(w?w:"")+"&esvr="+n.rand().toString()+"&esvlv="+n.V+"&esvtv="+n.TV+"&esvts="+e().toString(10)+"&esvtid="+n.TID,c=o.vurl;r.ctyp!=h?(c=c+"view.gif"+g,l=new Image,l.width=1,l.border="0",l.src=c,l.onload=function(){rt(l)}):(c=c+"view.js"+g,s=n.doc.createElement("script"),y=n.doc.getElementsByTagName("script")[0],s.type="text/javascript",s.defer=!1,s.async=!1,s.src=c,y.parentNode.insertBefore(s,y));n.fireHk&&n.fireHk(r.ctyp,a,s.src)}},u}();n.ViewTracker=et;typeof define=="function"&&define.amd&&define("esvtrackview",[],function(){return n})})(esvtrackview||(esvtrackview={})),function(){var t=window._novetv||t||!1,n;t||(n=esvtrackview.getTracker(),window["_etv"+n.vid]=n,n.start())}()